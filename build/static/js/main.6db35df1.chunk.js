(this["webpackJsonpshopping-cart"]=this["webpackJsonpshopping-cart"]||[]).push([[0],{2:function(e,t,c){"use strict";c.r(t),c.d(t,"FETCH_PRODUCTS",(function(){return r})),c.d(t,"FILTER_PRODUCTS_BY_SIZE",(function(){return s})),c.d(t,"ORDER_PRODUCTS_BY_PRICE",(function(){return n})),c.d(t,"ADD_TO_CART",(function(){return i})),c.d(t,"REMOVE_FROM_CART",(function(){return a})),c.d(t,"CREATE_ORDER",(function(){return l})),c.d(t,"CLEAR_ORDER",(function(){return d})),c.d(t,"CLEAR_CART",(function(){return o}));var r="FETCH_PRODUCTS",s="FILTER_PRODUCTS_BY_SIZE",n="ORDER_PRODUCTS_BY_SIZE",i="ADD_TO_CART",a="REMOVE_FROM_CART",l="CREATE_ORDER",d="CLEAR_ORDER",o="CLEAR_CART"},32:function(e,t,c){},50:function(e,t,c){"use strict";c.r(t);var r=c(1),s=c.n(r),n=c(10),i=c.n(n),a=(c(32),c(3)),l=c(4),d=c(7),o=c(6),j=c(13);function u(e){return"$"+Number(e.toFixed(1)).toLocaleString()+" "}var O=c(11),h=c.n(O),b=c(5),p=c(8),m=c(2),x=c(14),f=c.n(x),v=c(15),R=c.n(v),C=c(0),_=function(e){Object(d.a)(c,e);var t=Object(o.a)(c);function c(e){var r;return Object(a.a)(this,c),(r=t.call(this,e)).handleInput=function(e){r.setState(Object(j.a)({},e.target.name,e.target.value))},r.createOrder=function(e){e.preventDefault();var t={name:r.state.name,email:r.state.email,address:r.state.address,cartItems:r.props.cartItems,total:r.props.cartItems.reduce((function(e,t){return e+t.price*t.count}),0)};r.props.createOrder(t)},r.closeModal=function(){r.props.clearOrder()},r.state={showCheckout:!1,name:"",email:"",address:""},r}return Object(l.a)(c,[{key:"render",value:function(){var e=this,t=this.props,c=t.cartItems,r=t.order;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{children:[0===c.length?Object(C.jsx)("div",{className:"cart cart-header",children:"Cart is empty."}):Object(C.jsxs)("div",{className:"cart cart-header",children:["You have ",c.length," items in the cart."]}),r&&Object(C.jsx)(f.a,{isOpen:!0,onRequestClose:this.closeModal,children:Object(C.jsxs)(R.a,{children:[Object(C.jsx)("button",{className:"close-modal",onClick:this.closeModal,children:"x"}),Object(C.jsxs)("div",{className:"order-details",children:[Object(C.jsx)("h3",{className:"success-message",children:"Your order has been placed."}),Object(C.jsxs)("h2",{children:[" Order ",r._id," "]}),Object(C.jsxs)("ul",{children:[Object(C.jsxs)("li",{children:[Object(C.jsx)("div",{children:"Name:"}),Object(C.jsx)("div",{children:r.name})]}),Object(C.jsxs)("li",{children:[Object(C.jsx)("div",{children:"Email:"}),Object(C.jsx)("div",{children:r.email})]}),Object(C.jsxs)("li",{children:[Object(C.jsx)("div",{children:"Address:"}),Object(C.jsx)("div",{children:r.address})]}),Object(C.jsxs)("li",{children:[Object(C.jsx)("div",{children:"Created At:"}),Object(C.jsx)("div",{children:r.createdAt})]}),Object(C.jsxs)("li",{children:[Object(C.jsx)("div",{children:"Total:"}),Object(C.jsx)("div",{children:u(r.total)})]}),Object(C.jsxs)("li",{children:[Object(C.jsx)("div",{children:"Cart Items:"}),Object(C.jsx)("div",{children:r.cartItems.map((function(e){return Object(C.jsxs)("div",{children:[e.count," "," x "," ",e.title]})}))})]})]})]})]})})]}),Object(C.jsx)("div",{className:"cart",children:Object(C.jsxs)(h.a,{left:!0,cascade:!0,children:[" ",Object(C.jsx)("ul",{className:"cart-items",children:c.map((function(t){return Object(C.jsxs)("li",{children:[Object(C.jsx)("div",{children:Object(C.jsx)("img",{src:t.image,alt:t.title})}),Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{children:t.title}),Object(C.jsxs)("div",{className:"right",children:[u(t.price)," x ",t.count," ",Object(C.jsx)("button",{className:"button",onClick:function(){return e.props.removeFromCart(t)},children:"Remove"})]})]})]},t._id)}))})]})}),0!==c.length&&Object(C.jsxs)("div",{className:"cart",children:[Object(C.jsxs)("div",{className:"total",children:[Object(C.jsxs)("div",{children:["Total:"," ",u(c.reduce((function(e,t){return e+t.price*t.count}),0))]}),Object(C.jsx)("button",{onClick:function(){e.setState({showCheckout:!0})},className:"button primary",children:"Proceed"})]}),this.state.showCheckout&&Object(C.jsx)(h.a,{right:!0,cascade:!0,children:Object(C.jsx)("div",{className:"cart",children:Object(C.jsx)("form",{onSubmit:this.createOrder,children:Object(C.jsxs)("ul",{className:"form-container",children:[Object(C.jsxs)("li",{children:[Object(C.jsx)("label",{children:"Email"}),Object(C.jsx)("input",{type:"email",required:!0,onChange:this.handleInput,name:"email"})]}),Object(C.jsxs)("li",{children:[Object(C.jsx)("label",{children:"Name"}),Object(C.jsx)("input",{type:"text",required:!0,onChange:this.handleInput,name:"name"})]}),Object(C.jsxs)("li",{children:[Object(C.jsx)("label",{children:"Address"}),Object(C.jsx)("input",{type:"text",required:!0,onChange:this.handleInput,name:"address"})]}),Object(C.jsx)("li",{children:Object(C.jsx)("button",{className:"button primary",type:"submit",children:"Checkout"})})]})})})})]})]})}}]),c}(r.Component),E=Object(b.b)((function(e){return{order:e.order.order,cartItems:e.cart.cartItems}}),{removeFromCart:function(e){return function(t,c){var r=c().cart.cartItems.slice().filter((function(t){return t._id!==e._id}));t({type:m.REMOVE_FROM_CART,payload:{cartItems:r}}),localStorage.setItem("cartItems",JSON.stringify(r))}},createOrder:function(e){return function(t){fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){t({type:m.CREATE_ORDER,payload:e}),localStorage.clear("cartItems"),t({type:m.CLEAR_CART})}))}},clearOrder:function(){return function(e){e({type:m.CLEAR_ORDER})}}})(_),T=c(20),g=c.n(T),y=c(26),I=function(e){Object(d.a)(c,e);var t=Object(o.a)(c);function c(){return Object(a.a)(this,c),t.apply(this,arguments)}return Object(l.a)(c,[{key:"render",value:function(){var e=this;return this.props.filteredProducts?Object(C.jsxs)("div",{className:"filter",value:this.props.sort,children:[Object(C.jsxs)("div",{className:"filter-result",children:[this.props.count," Products"]}),Object(C.jsxs)("div",{className:"filter-sort",children:["Order"," ",Object(C.jsxs)("select",{value:this.props.sort,onChange:function(t){return e.props.sortProducts(e.props.products,t.target.value)},children:[Object(C.jsx)("option",{value:"latest",children:"Latest"}),Object(C.jsx)("option",{value:"lowest",children:"Lowest"}),Object(C.jsx)("option",{value:"highest",children:"Highest"})]})]}),Object(C.jsxs)("div",{className:"filter-size",children:["Filter",Object(C.jsxs)("select",{value:this.props.size,onChange:function(t){return e.props.filteredProducts(e.props.products,t.target.value)},children:[Object(C.jsx)("option",{value:"",children:"All"}),Object(C.jsx)("option",{value:"XS",children:"XS"}),Object(C.jsx)("option",{value:"S",children:"S"}),Object(C.jsx)("option",{value:"M",children:"M"}),Object(C.jsx)("option",{value:"L",children:"L"}),Object(C.jsx)("option",{value:"XL",children:"XL"}),Object(C.jsx)("option",{value:"XXL",children:"XXL"})]})]})]}):Object(C.jsx)("div",{children:"Loading ..."})}}]),c}(r.Component),S=Object(b.b)((function(e){return{size:e.products.size,sort:e.products.sort,products:e.products.items,filteredProducts:e.products.filteredItems}}),{filteredProducts:function(e,t){return function(c){c({type:m.FILTER_PRODUCTS_BY_SIZE,payload:{size:t,items:""===t?e:e.filter((function(e){return e.availableSizes.indexOf(t)>=0}))}})}},sortProducts:function(e,t){return function(c){var r=e.slice();"latest"===t?r.sort((function(e,t){return e._id>t._id?1:-1})):r.sort((function(e,c){return"lowest"===t?e.price>c.price?1:-1:e.price>c.price?-1:1})),c({type:m.ORDER_PRODUCTS_BY_PRICE,payload:{sort:t,items:r}})}}})(I),N=function(e){Object(d.a)(c,e);var t=Object(o.a)(c);function c(e){var r;return Object(a.a)(this,c),(r=t.call(this,e)).openModal=function(e){r.setState({product:e})},r.closeModal=function(){r.setState({product:null})},r.state={product:null},r}return Object(l.a)(c,[{key:"componentDidMount",value:function(){this.props.fetchProducts()}},{key:"render",value:function(){var e=this,t=this.state.product;return Object(C.jsxs)("div",{children:[Object(C.jsx)(h.a,{bottom:!0,cacade:!0,children:this.props.products?Object(C.jsx)("ul",{className:"products",children:this.props.products.map((function(t){return Object(C.jsx)("li",{children:Object(C.jsxs)("div",{className:"product",children:[Object(C.jsxs)("a",{href:"#"+t._id,onClick:function(){return e.openModal(t)},children:[Object(C.jsx)("img",{src:t.image,alt:t.title}),Object(C.jsx)("p",{children:t.title})]}),Object(C.jsxs)("div",{className:"product-price",children:[Object(C.jsx)("div",{children:u(t.price)}),Object(C.jsx)("button",{onClick:function(){return e.props.addToCart(t)},className:"button primary",children:"Add To Cart"})]})]})},t._id)}))}):Object(C.jsx)("div",{children:"Lodading..."})}),t&&Object(C.jsx)(f.a,{isOpen:!0,onRequestClose:this.closeModal,children:Object(C.jsxs)(R.a,{children:[Object(C.jsx)("button",{className:"close-modal",onClick:this.closeModal,children:"X"}),Object(C.jsxs)("div",{className:"prodcut-details",children:[Object(C.jsx)("img",{src:t.image,alt:t.title}),Object(C.jsxs)("div",{className:"product-details-description",children:[Object(C.jsx)("p",{children:Object(C.jsxs)("strong",{children:[" ",t.title," "]})}),Object(C.jsx)("p",{children:Object(C.jsxs)("strong",{children:[" ",t.description," "]})}),Object(C.jsxs)("p",{children:["Available Sizes:"," ",t.availableSizes.map((function(e){return Object(C.jsxs)("span",{children:[" ",Object(C.jsx)("button",{className:"button",children:e})]})}))]}),Object(C.jsxs)("div",{className:" product-price",children:[Object(C.jsx)("div",{children:u(t.price)}),Object(C.jsx)("button",{className:"button primary",onClick:function(){e.props.addToCart(t),e.closeModal()},children:"Add To Cart"})]})]})]})]})})]})}}]),c}(r.Component),D=Object(b.b)((function(e){return{products:e.products.filteredItems}}),{fetchProducts:function(){return function(){var e=Object(y.a)(g.a.mark((function e(t){var c,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/products");case 2:return c=e.sent,e.next=5,c.json();case 5:r=e.sent,t({type:m.FETCH_PRODUCTS,payload:r});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},addToCart:function(e){return function(t,c){var r=c().cart.cartItems.slice(),s=!1;r.forEach((function(t){t._id===e._id&&(s=!0,t.count++)})),s||r.push(Object(p.a)(Object(p.a)({},e),{},{count:1})),t({type:m.ADD_TO_CART,payload:{cartItems:r}}),localStorage.setItem("cartItems",JSON.stringify(r))}}})(N),A=c(12),P=c(27),L=c(2),M=L.CREATE_ORDER,k=L.CLEAR_ORDER,F=c(2),w=F.FETCH_PRODUCTS,U=F.FILTER_PRODUCTS_BY_SIZE,X=F.ORDER_PRODUCTS_BY_PRICE,z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||A.c,Y=Object(A.d)(Object(A.b)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(p.a)(Object(p.a)({},e),{},{size:t.payload.size,filteredItems:t.payload.items});case X:return Object(p.a)(Object(p.a)({},e),{},{sort:t.payload.sort,filteredItems:t.payload.items});case w:return{items:t.payload,filteredItems:t.payload};default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartItems:JSON.parse(localStorage.getItem("cartItems")||"[]")},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.ADD_TO_CART:case m.REMOVE_FROM_CART:return{cartItems:t.payload.cartItems};default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return{order:t.payload};case k:return{order:null};default:return e}}}),{},z(Object(A.a)(P.a))),B=Y,J=function(e){Object(d.a)(c,e);var t=Object(o.a)(c);function c(){return Object(a.a)(this,c),t.apply(this,arguments)}return Object(l.a)(c,[{key:"render",value:function(){return Object(C.jsx)(b.a,{store:B,children:Object(C.jsxs)("div",{className:"grid-container",children:[Object(C.jsx)("header",{children:Object(C.jsx)("a",{href:"/",children:"React Shopping Cart"})}),Object(C.jsx)("main",{children:Object(C.jsxs)("div",{className:"content",children:[Object(C.jsxs)("div",{className:"main",children:[Object(C.jsx)(S,{}),Object(C.jsx)(D,{})]}),Object(C.jsx)("div",{className:"sidebar",children:Object(C.jsx)(E,{})})]})}),Object(C.jsx)("footer",{children:"All rights is reseverd!"})]})})}}]),c}(s.a.Component),q=J;i.a.render(Object(C.jsx)(s.a.StrictMode,{children:Object(C.jsx)(q,{})}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.6db35df1.chunk.js.map